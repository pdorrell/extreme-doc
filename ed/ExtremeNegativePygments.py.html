<!DOCTYPE html>
<html>
<head>
<title>ed/ExtremeNegativePygments.py</title>
<link href = "../default.css" type = "text/css" rel = "stylesheet"/>
<link href = "../extreme-doc.css" type = "text/css" rel = "stylesheet"/>
<script src="../js/jquery.min.1.6.4.js" type="text/javascript"></script>
<script src="../extreme-doc.js" type="text/javascript"></script>
<body>
<div class="highlight">
<div class="ce-line"><code><span class="ce">pygments.highlight is the main function in pygments to generate a highlighted version of a source file</span></code></div>
<div class="line"><code><span class="n">from</span> <span class="n">pygments</span> <span class="n">import</span> <span class="n">highlight</span></code></div>
<div class="ce-line"><code><span class="ce">pygments.filter.Filter is the base class for pygments filters, to process a stream of token-string pairs to generate a new stream of token-string pairs</span></code></div>
<div class="line"><code><span class="n">from</span> <span class="n">pygments</span><span class="o">.</span><span class="n">filter</span> <span class="n">import</span> <span class="no">Filter</span></code></div>
<div class="ce-line"><code><span class="ce">RubyLexer is the pygments lexer which knows how to parse a Ruby source file (to generate a stream of token-string pairs)</span></code></div>
<div class="line"><code><span class="n">from</span> <span class="n">pygments</span><span class="o">.</span><span class="n">lexers</span> <span class="n">import</span> <span class="no">RubyLexer</span></code></div>
<div class="ce-line"><code><span class="ce">Token is the base class for token type objects, STANDARD_TYPES is </span></code></div>
<div class="line"><code><span class="n">from</span> <span class="n">pygments</span><span class="o">.</span><span class="n">token</span> <span class="n">import</span> <span class="no">Token</span><span class="p">,</span> <span class="no">STANDARD_TYPES</span> <span class="n">is</span> <span class="n">the</span> <span class="n">mapping</span> <span class="n">from</span> <span class="n">token</span> <span class="n">to</span> <span class="no">CSS</span> <span class="k">class</span></code></div>
<div class="ce-line"><code><span class="ce">HtmlFormatter is the formatter that knows how to output to HTML (and which gets sub-classed here)</span></code></div>
<div class="line"><code><span class="n">from</span> <span class="n">pygments</span><span class="o">.</span><span class="n">formatters</span> <span class="n">import</span> <span class="no">HtmlFormatter</span></code></div>
<div class="ce-line"><code><span class="ce">os for path.exists, re for regular expressions used to parse output of HtmlFormatter (so we can post-process it)</span></code></div>
<div class="line"><code><span class="n">import</span> <span class="n">os</span><span class="p">,</span> <span class="n">re</span></code></div>
<div class="ce-line"><code><span class="ce">urlopen, to download a google-provided version of jquery</span></code></div>
<div class="line"><code><span class="n">from</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span> <span class="n">import</span> <span class="n">urlopen</span></code></div>
<div class="ce-line"><code><span class="ce">StringIO, to convert output of &quot;write&quot; call into a string</span></code></div>
<div class="line"><code><span class="n">from</span> <span class="n">io</span> <span class="n">import</span> <span class="no">StringIO</span></code></div>
<div class="line"><code></code></div>
<div class="ce-line"><code><span class="ce">Here we implicitly define Token.Comment.Negative (because that&#39;s how pygment Tokens work), and set it&#39;s CSS class to &quot;cn&quot;</span></code></div>
<div class="line"><code><span class="no">STANDARD_TYPES</span><span class="o">[</span><span class="no">Token</span><span class="o">.</span><span class="n">Comment</span><span class="o">.</span><span class="n">Negative</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;cn&quot;</span></code></div>
<div class="line"><code></code></div>
<div class="ce-line"><code><span class="ce">Current version of JQuery that we use</span></code></div>
<div class="line"><code><span class="no">JSQUERY_VERSION</span> <span class="o">=</span> <span class="s2">&quot;1.6.4&quot;</span></code></div>
<div class="ce-line"><code><span class="ce">URL for downloading specified version of JQuery (just to avoid including it in the project)</span></code></div>
<div class="line"><code><span class="no">JSQUERY_URL</span> <span class="o">=</span> <span class="s2">&quot;http://ajax.googleapis.com/ajax/libs/jquery/%s/jquery.min.js&quot;</span> <span class="o">%</span> <span class="no">JSQUERY_VERSION</span></code></div>
<div class="ce-line"><code><span class="ce">Construct name of local copy of JQuery file (so different versions can co-exist, and don&#39;t get confused)</span></code></div>
<div class="line"><code><span class="no">JSQUERY_FILENAME</span> <span class="o">=</span> <span class="s2">&quot;jquery.min.%s.js&quot;</span> <span class="o">%</span> <span class="no">JSQUERY_VERSION</span></code></div>
<div class="ce-line"><code><span class="ce">Location of local copy of JQuery file, also it&#39;s relative URL to generated HTML file</span></code></div>
<div class="line"><code><span class="no">JSQUERY_FILE_LOCATION</span> <span class="o">=</span> <span class="s2">&quot;js/%s&quot;</span> <span class="o">%</span> <span class="no">JSQUERY_FILENAME</span></code></div>
<div class="line"><code></code></div>
<div class="ce-line"><code><span class="ce">A pygments filter which will relabel comments starting with (&quot;#N &quot;) as being of type Token.Comment.Negative</span></code></div>
<div class="line"><code><span class="k">class</span> <span class="nc">RelabelNegativeCommentsFilter</span><span class="p">(</span><span class="no">Filter</span><span class="p">):</span></code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp<span class="ce">The Filter.filter method, as required to be overridden</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">filter</span> <span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">lexer</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span></code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="ce">iterate over all incoming token/String pairs</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">for</span> <span class="n">ttype</span><span class="p">,</span> <span class="n">value</span> <span class="k">in</span> <span class="n">stream</span><span class="p">:</span></code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="ce">If it&#39;s a &quot;single&quot; comment (i.e. not multi-line) and starts with &quot;#N &quot;</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">if</span> <span class="n">ttype</span> <span class="o">==</span> <span class="no">Token</span><span class="o">.</span><span class="n">Comment</span><span class="o">.</span><span class="n">Single</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#N &quot;</span><span class="p">):</span></code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="ce">Replace it with Token.Comment.Negative, and trim the initial &quot;#N &quot; </span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">yield</span> <span class="no">Token</span><span class="o">.</span><span class="n">Comment</span><span class="o">.</span><span class="n">Negative</span><span class="p">,</span> <span class="n">value</span><span class="o">[</span><span class="mi">3</span><span class="p">:</span><span class="o">]</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">else</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="c1">#print(&quot; ttype = %s, value = %r&quot; % (ttype, value))</span></code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="ce">Otherwise pass the token/String pair through as is</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">yield</span> <span class="n">ttype</span><span class="p">,</span> <span class="n">value</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code><span class="c1"># A sub-class of HtmlFormatter, which adds its own header/footer, and which post-processes the highlighted code</span></code></div>
<div class="line"><code><span class="c1"># (HtmlFormatter has a header, but it doesn&#39;t have enough options for what we want)</span></code></div>
<div class="line"><code><span class="k">class</span> <span class="nc">HtmlPageFormatter</span><span class="p">(</span><span class="no">HtmlFormatter</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp<span class="ce">Construct with same options as allowed for HtmlFormatter</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span></code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="ce">Invoke the HtmlFormatter constructor with the same options</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="no">HtmlFormatter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp<span class="ce">Method to output the HTML header for the page</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">htmlStart</span><span class="p">(</span><span class="nb">self</span><span class="p">):</span></code></div>
<div class="ce-line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="ce">Output the HTML header for the page</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="s2">&quot;&quot;&quot;%s</span></code></div>
<div class="line"><code><span class="s2">&lt;html&gt;</span></code></div>
<div class="line"><code><span class="s2">&lt;head&gt;</span></code></div>
<div class="line"><code><span class="s2">&lt;title&gt;%s&lt;/title&gt;</span></code></div>
<div class="line"><code><span class="s2">%s</span></code></div>
<div class="line"><code><span class="s2">%s</span></code></div>
<div class="line"><code><span class="s2">&lt;body&gt;</span></code></div>
<div class="line"><code><span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">htmlDocType</span><span class="p">(),</span> <span class="nb">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">cssIncludes</span><span class="p">(),</span> <span class="nb">self</span><span class="o">.</span><span class="n">javascriptIncludes</span><span class="p">())</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="c1">#</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">cssIncludes</span><span class="p">(</span><span class="nb">self</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;&lt;link href = </span><span class="se">\&quot;</span><span class="s2">%s</span><span class="se">\&quot;</span><span class="s2"> type = </span><span class="se">\&quot;</span><span class="s2">text/css</span><span class="se">\&quot;</span><span class="s2"> rel = </span><span class="se">\&quot;</span><span class="s2">stylesheet</span><span class="se">\&quot;</span><span class="s2">/&gt;&quot;</span> <span class="o">%</span> <span class="n">cssFile</span> </code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">for</span> <span class="n">cssFile</span> <span class="k">in</span> <span class="nb">self</span><span class="o">.</span><span class="n">cssFiles</span><span class="p">()</span><span class="o">]</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">javascriptIncludes</span><span class="p">(</span><span class="nb">self</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;&lt;script src=</span><span class="se">\&quot;</span><span class="s2">%s</span><span class="se">\&quot;</span><span class="s2"> type=</span><span class="se">\&quot;</span><span class="s2">text/javascript</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/script&gt;&quot;</span> <span class="o">%</span> <span class="n">javascriptFile</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">for</span> <span class="n">javascriptFile</span> <span class="k">in</span> <span class="nb">self</span><span class="o">.</span><span class="n">javascriptFiles</span><span class="p">()</span><span class="o">]</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">cssFiles</span><span class="p">(</span><span class="nb">self</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="o">[</span><span class="s2">&quot;default.css&quot;</span><span class="p">,</span> <span class="s2">&quot;extreme-doc.css&quot;</span><span class="o">]</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">javascriptFiles</span><span class="p">(</span><span class="nb">self</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="o">[</span><span class="no">JSQUERY_FILE_LOCATION</span><span class="p">,</span> <span class="s2">&quot;extreme-doc.js&quot;</span><span class="o">]</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">htmlDocType</span><span class="p">(</span><span class="nb">self</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="s2">&quot;&lt;!DOCTYPE html&gt;&quot;</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">htmlEnd</span><span class="p">(</span><span class="nb">self</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="s2">&quot;&lt;/body&gt;&lt;/html&gt;</span><span class="se">\n</span><span class="s2">&quot;</span></code></div>
<div class="line"><code></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">emptyLineRegex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">r</span><span class="s1">&#39;^(\s*)$&#39;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">cnLineRegex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">r</span><span class="s1">&#39;^(\s*)(&lt;span class=&quot;cn&quot;&gt;(.*))$&#39;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">lineRegex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">r</span><span class="s1">&#39;^(\s*)(&lt;span class=&quot;(.*))$&#39;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">codeLineTemplate</span> <span class="o">=</span> <span class="s2">&quot;&lt;div class=</span><span class="se">\&quot;</span><span class="s2">%s</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;code&gt;%s%s&lt;/code&gt;&lt;/div&gt;&quot;</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">taggedCodeLine</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">indentWhitespace</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="no">HtmlPageFormatter</span><span class="o">.</span><span class="n">codeLineTemplate</span> <span class="o">%</span> <span class="p">(</span><span class="n">tag</span><span class="p">,</span> </code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">indentWhitespace</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;nbsp&quot;</span><span class="p">),</span> </code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">line</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">divifiedSpanLine</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">spanLine</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">match</span> <span class="o">=</span> <span class="no">HtmlPageFormatter</span><span class="o">.</span><span class="n">cnLineRegex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">spanLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">if</span> <span class="n">match</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="nb">self</span><span class="o">.</span><span class="n">taggedCodeLine</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="s2">&quot;cn-line&quot;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">else</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">match</span> <span class="o">=</span> <span class="no">HtmlPageFormatter</span><span class="o">.</span><span class="n">emptyLineRegex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">spanLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">if</span> <span class="n">match</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="nb">self</span><span class="o">.</span><span class="n">taggedCodeLine</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;line&quot;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">else</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">match</span> <span class="o">=</span> <span class="no">HtmlPageFormatter</span><span class="o">.</span><span class="n">lineRegex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">spanLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">if</span> <span class="n">match</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">return</span> <span class="nb">self</span><span class="o">.</span><span class="n">taggedCodeLine</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="s2">&quot;line&quot;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">else</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">raise</span> <span class="no">Exception</span><span class="p">(</span><span class="s2">&quot;Unexpected pygments line: %r&quot;</span> <span class="o">%</span> <span class="n">spanLine</span><span class="p">)</span></code></div>
<div class="line"><code></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">firstLineRegex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">r</span><span class="s1">&#39;^(&lt;div.*)&lt;pre&gt;(.*)$&#39;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">lastLineRegex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">r</span><span class="s1">&#39;^(.*)&lt;/pre&gt;(&lt;/div&gt;)$&#39;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">writeDivifiedHtml</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">spannedHtml</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">lines</span> <span class="o">=</span> <span class="n">spannedHtml</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">firstLine</span> <span class="o">=</span> <span class="n">lines</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;firstLine = %r&quot;</span> <span class="o">%</span> <span class="n">firstLine</span><span class="p">)</span></code></div>
<div class="line"><code></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">firstLineMatch</span> <span class="o">=</span> <span class="no">HtmlPageFormatter</span><span class="o">.</span><span class="n">firstLineRegex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">firstLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">if</span> <span class="n">firstLineMatch</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">firstLineMatch</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">self</span><span class="o">.</span><span class="n">divifiedSpanLine</span><span class="p">(</span><span class="n">firstLineMatch</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">else</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">raise</span> <span class="no">Exception</span><span class="p">(</span><span class="s2">&quot;First line %r does not match expected pattern&quot;</span> <span class="o">%</span> <span class="n">firstLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="c1">#print(&quot; line %r&quot; % lines[i])</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">self</span><span class="o">.</span><span class="n">divifiedSpanLine</span><span class="p">(</span><span class="n">lines</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">))</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">lastLine</span> <span class="o">=</span> <span class="n">lines</span><span class="o">[-</span><span class="mi">2</span><span class="o">]</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;lastLine = %r&quot;</span> <span class="o">%</span> <span class="n">lastLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">lastLineMatch</span> <span class="o">=</span> <span class="no">HtmlPageFormatter</span><span class="o">.</span><span class="n">lastLineRegex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">lastLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">if</span> <span class="n">lastLineMatch</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">self</span><span class="o">.</span><span class="n">divifiedSpanLine</span><span class="p">(</span><span class="n">lastLineMatch</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">lastLineMatch</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">else</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">raise</span> <span class="no">Error</span><span class="p">(</span><span class="s2">&quot;Last line %r does not match expected pattern&quot;</span> <span class="o">%</span> <span class="n">lastLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">veryLastLine</span> <span class="o">=</span> <span class="n">lines</span><span class="o">[-</span><span class="mi">1</span><span class="o">]</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">if</span> <span class="n">veryLastLine</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="k">raise</span> <span class="no">Error</span><span class="p">(</span><span class="s2">&quot;very last line %r is not empty&quot;</span> <span class="o">%</span> <span class="n">veryLastLine</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">def</span> <span class="nf">format_unencoded</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">tokensource</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">htmlStart</span><span class="p">())</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">stringBuffer</span> <span class="o">=</span> <span class="no">StringIO</span><span class="p">()</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="no">HtmlFormatter</span><span class="o">.</span><span class="n">format_unencoded</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">tokensource</span><span class="p">,</span> <span class="n">stringBuffer</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">highlightedHtml</span> <span class="o">=</span> <span class="n">stringBuffer</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="nb">self</span><span class="o">.</span><span class="n">writeDivifiedHtml</span><span class="p">(</span><span class="n">highlightedHtml</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">stringBuffer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">htmlEnd</span><span class="p">())</span></code></div>
<div class="line"><code></code></div>
<div class="line"><code><span class="k">def</span> <span class="nf">downloadUrlToFile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">clobberIfThere</span> <span class="o">=</span> <span class="no">False</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Downloading %s to %s ...&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fileName</span><span class="p">))</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">if</span> <span class="n">clobberIfThere</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">webFile</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">localFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">localFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">webFile</span><span class="o">.</span><span class="n">read</span><span class="p">())</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">webFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="n">localFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; downloaded.&quot;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="k">else</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot; not replacing existing file %s&quot;</span> <span class="o">%</span> <span class="n">fileName</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">):</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">outputFileName</span> <span class="o">=</span> <span class="s2">&quot;%s.html&quot;</span> <span class="o">%</span> <span class="n">inputFileName</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">rubyLexer</span> <span class="o">=</span> <span class="no">RubyLexer</span><span class="p">()</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">rubyLexer</span><span class="o">.</span><span class="n">add_filter</span><span class="p">(</span><span class="no">RelabelNegativeCommentsFilter</span><span class="p">())</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">htmlPageFormatter</span> <span class="o">=</span> <span class="no">HtmlPageFormatter</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="n">inputFileName</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">inputFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">code</span> <span class="o">=</span> <span class="n">inputFile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">inputFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pygmentizing %s into %s ...&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inputFileName</span><span class="p">,</span> <span class="n">outputFileName</span><span class="p">))</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">outputFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">outputFileName</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp</code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">rubyLexer</span><span class="p">,</span> <span class="n">htmlPageFormatter</span><span class="p">,</span> <span class="n">outfile</span> <span class="o">=</span> <span class="n">outputFile</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">outputFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></code></div>
<div class="line"><code></code></div>
<div class="line"><code><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">downloadUrlToFile</span> <span class="p">(</span><span class="no">JSQUERY_URL</span><span class="p">,</span> <span class="no">JSQUERY_FILE_LOCATION</span><span class="p">,</span> <span class="n">clobberIfThere</span> <span class="o">=</span> <span class="no">False</span><span class="p">)</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">inputFileName</span> <span class="o">=</span> <span class="s2">&quot;synqa.rb&quot;</span></code></div>
<div class="line"><code>&nbsp&nbsp&nbsp&nbsp<span class="n">main</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">)</span></code></div>
<div class="line"><code></code></div>
</div>
</body></html>
